{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import React from'react';import NavbarLoggedin from'../components/NavbarLoggedin';import Banner from'../components/Banner';import FooterLoggedIn from'../components/FooterLoggedIn';import GiftShopItem from'../components/GiftShopItem';import{withRouter}from'react-router-dom';import{useState,useEffect}from'react';import axios from'axios';import Swal from'sweetalert2';import'sweetalert2/src/sweetalert2.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GiftShop=function GiftShop(){var user_id=localStorage.getItem('user_id');useEffect(function(){fetchData();fetchPoints();},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),giftshop_data=_useState2[0],set_giftshop_data=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),husegpontok=_useState4[0],set_husegpontok=_useState4[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var shop_data_raw,shop_data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"api/giftstore/get-remaining-items\");case 2:shop_data_raw=_context.sent;_context.next=5;return shop_data_raw.data.items;case 5:shop_data=_context.sent;set_giftshop_data(shop_data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var fetchPoints=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data_raw,points;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"api/points/users/\".concat(user_id));case 2:data_raw=_context2.sent;_context2.next=5;return data_raw.data.husegpontok;case 5:points=_context2.sent;set_husegpontok(points);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchPoints(){return _ref2.apply(this,arguments);};}();var Redeem=function Redeem(id){Swal.fire({text:\"Biztosan be szeretné váltani pontjait erre a tételre?\",icon:'question',showCancelButton:true,confirmButtonColor:'#23552f',cancelButtonColor:'#d33',confirmButtonText:'Igen, beváltom',cancelButtonText:'Mégsem'}).then(function(result){if(result.isConfirmed){var data={user_id:user_id,item_id:id};axios.post(\"api/giftstore/redeem-item\",data).then(function(res){if(res.data.status===200){Swal.fire({title:'Az Ön kódja:',text:res.data.message,footer:'FIGYELEM! Ha bezárja ezt az ablakot a kód eltűnik!',icon:'success',iconColor:'#23552f',showCancelButton:false,confirmButtonColor:'#23552f'}).then(function(result){if(result.isConfirmed){setInterval(function(){window.location.reload(false);},1000);}});}else if(res.data.status===400){Swal.fire({title:'Sajnáljuk :(',text:res.data.message,icon:'warning',iconColor:'#972626',showCancelButton:false,confirmButtonColor:'#23552f'});}});}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavbarLoggedin,{}),/*#__PURE__*/_jsx(\"div\",{className:\"empty_space\"}),/*#__PURE__*/_jsx(Banner,{title:\"H\\u0171s\\xE9gprogram\"}),/*#__PURE__*/_jsx(\"div\",{className:\"huseg_wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"huseg_text\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"A 2021.01.01 - t\\u0151l indult h\\u0171s\\xE9gprogramunkban szeretn\\xE9nk megjutalmazni \\xFCgyfeleinket akik minket v\\xE1lasztanak! Minden n\\xE1lunk 3 nap vagy ann\\xE1l hoszzabb id\\u0151re k\\xF6lcs\\xF6nz\\xF6tt g\\xE9pj\\xE1rm\\u0171 ut\\xE1n 200 h\\u0171s\\xE9gpont ker\\xFCl j\\xF3v\\xE1\\xEDr\\xE1sra \\xFCgyfel\\xFCnk fi\\xF3kj\\xE1n amelyeket a lentebb tal\\xE1lhat\\xF3 aj\\xE1nd\\xE9kokra v\\xE1lthat be! Gy\\u0171jtse \\xD6n is a pontjait amiket bev\\xE1lthat! A pontoz\\xE1s az al\\xE1bbi t\\xE1bl\\xE1zat alapj\\xE1n t\\xF6rt\\xE9nik:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"K\\xF6lcs\\xF6nz\\xE9si id\\u0151\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pont\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"3 nap\"}),/*#__PURE__*/_jsx(\"td\",{children:\"200 \"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"4 nap\"}),/*#__PURE__*/_jsx(\"td\",{children:\"250 \"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"5 nap\"}),/*#__PURE__*/_jsx(\"td\",{children:\"350 \"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"6 nap\"}),/*#__PURE__*/_jsx(\"td\",{children:\"500 \"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"7 nap\"}),/*#__PURE__*/_jsx(\"td\",{children:\"1000 \"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"* FIGYELEM: A h\\u0171s\\xE9gprogram csak a 2021.01.01- t\\u0151l ig\\xE9nybe vet k\\xF6lcs\\xF6nz\\xE9sekre vonatkozik, visszamen\\u0151legesen nem.\",/*#__PURE__*/_jsx(\"br\",{}),\"* A h\\u0171s\\xE9gpontok csak akkor ker\\xFClnek j\\xF3v\\xE1\\xEDr\\xE1sra fi\\xF3kj\\xE1ban ha m\\xE1r \\xE1tvette a j\\xE1rm\\u0171vet!\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"gift_shop_wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gift_shop_banner\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Aj\\xE1nd\\xE9kbolt\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"points_banner\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Az \\xD6n pontjai: \",/*#__PURE__*/_jsx(\"span\",{className:\"highlighted_number\",children:husegpontok})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"giftshop_container\",children:giftshop_data.map(function(data){return/*#__PURE__*/_jsx(GiftShopItem,{action:function action(){return Redeem(data.id);},id:data.id,name:data.item_name,price:data.item_price,picture:data.item_picture,remaining:data.item_remaining});})})]}),/*#__PURE__*/_jsx(FooterLoggedIn,{})]});};export default withRouter(GiftShop);","map":{"version":3,"sources":["C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/src/pages/GiftShop.js"],"names":["React","NavbarLoggedin","Banner","FooterLoggedIn","GiftShopItem","withRouter","useState","useEffect","axios","Swal","GiftShop","user_id","localStorage","getItem","fetchData","fetchPoints","giftshop_data","set_giftshop_data","husegpontok","set_husegpontok","get","shop_data_raw","data","items","shop_data","data_raw","points","Redeem","id","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","item_id","post","res","status","title","message","footer","iconColor","setInterval","window","location","reload","map","item_name","item_price","item_picture","item_remaining"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from 'react'\r\nimport NavbarLoggedin from '../components/NavbarLoggedin'\r\nimport Banner from '../components/Banner'\r\nimport FooterLoggedIn from '../components/FooterLoggedIn'\r\nimport GiftShopItem from '../components/GiftShopItem'\r\nimport {withRouter} from 'react-router-dom'\r\nimport {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2'\r\nimport 'sweetalert2/src/sweetalert2.scss'\r\n\r\nconst GiftShop = () => {\r\n\r\n\r\n\r\n\r\n\r\nconst user_id = localStorage.getItem('user_id');\r\n\r\n useEffect(() => {\r\n          fetchData();\r\n          fetchPoints();\r\n      }, []);\r\n\r\n\r\n\r\n    const [giftshop_data, set_giftshop_data] = useState([]);\r\n    const [husegpontok, set_husegpontok] = useState();\r\n\r\n\r\n    const fetchData = async() => {\r\n          const shop_data_raw = await axios.get(`api/giftstore/get-remaining-items`);\r\n          const shop_data= await shop_data_raw.data.items;\r\n          set_giftshop_data(shop_data);\r\n\r\n    };\r\n\r\n        const fetchPoints = async() => {\r\n          const data_raw = await axios.get(`api/points/users/${user_id}`);\r\n          const points = await data_raw.data.husegpontok;\r\n          set_husegpontok(points);\r\n\r\n    };\r\n\r\n\r\n\r\n\r\n    const Redeem = (id) => {\r\n    \r\n    Swal.fire({\r\n  \r\n        text: \"Biztosan be szeretné váltani pontjait erre a tételre?\",\r\n        icon: 'question',\r\n        showCancelButton: true,\r\n        confirmButtonColor: '#23552f',\r\n        cancelButtonColor: '#d33',\r\n        confirmButtonText: 'Igen, beváltom',\r\n        cancelButtonText: 'Mégsem'\r\n\r\n}).then((result) => {\r\n\r\n  if (result.isConfirmed) {\r\n\r\n        const data = {\r\n          user_id: user_id,\r\n          item_id: id,\r\n        }\r\n\r\n    \r\n       axios.post(`api/giftstore/redeem-item`, data).then(res => {\r\n\r\n\r\n        if(res.data.status === 200) {\r\n\r\n           Swal.fire({\r\n  \r\n                      title: 'Az Ön kódja:',\r\n                      text: res.data.message,\r\n                      footer: 'FIGYELEM! Ha bezárja ezt az ablakot a kód eltűnik!',\r\n                      icon: 'success',\r\n                      iconColor: '#23552f',\r\n                      showCancelButton: false,\r\n                      confirmButtonColor: '#23552f',\r\n                      \r\n\r\n              }).then((result) => {\r\n\r\n                if (result.isConfirmed) {\r\n                      setInterval(() => {\r\n                        window.location.reload(false);\r\n                      }, 1000);\r\n\r\n\r\n                }\r\n              }) \r\n\r\n\r\n\r\n\r\n\r\n          } else if (res.data.status === 400) {\r\n\r\n\r\n        \r\n        \r\n        \r\n            Swal.fire({\r\n  \r\n                      title: 'Sajnáljuk :(',\r\n                      text: res.data.message,\r\n                      icon: 'warning',\r\n                      iconColor: '#972626',\r\n                      showCancelButton: false,\r\n                      confirmButtonColor: '#23552f',\r\n\r\n              })\r\n\r\n                \r\n              \r\n        \r\n          } \r\n\r\n     });\r\n\r\n\r\n\r\n  }\r\n}) \r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <NavbarLoggedin />\r\n      <div className=\"empty_space\"></div>\r\n      <Banner title=\"Hűségprogram\" />\r\n      <div className=\"huseg_wrapper\">\r\n        <div className=\"huseg_text\">\r\n          <p>\r\n            A 2021.01.01 - től indult hűségprogramunkban szeretnénk\r\n            megjutalmazni ügyfeleinket akik minket választanak! Minden nálunk 3\r\n            nap vagy annál hoszzabb időre kölcsönzött gépjármű után 200\r\n            hűségpont kerül jóváírásra ügyfelünk fiókján amelyeket a lentebb\r\n            található ajándékokra válthat be! Gyűjtse Ön is a pontjait amiket\r\n            beválthat! A pontozás az alábbi táblázat alapján történik:\r\n          </p>\r\n\r\n          <br />\r\n\r\n          <table>\r\n            <tr>\r\n              <th>Kölcsönzési idő</th>\r\n              <th>Pont</th>\r\n            </tr>\r\n            <tr>\r\n              <td>3 nap</td>\r\n              <td>200 </td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td>4 nap</td>\r\n              <td>250 </td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td>5 nap</td>\r\n              <td>350 </td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td>6 nap</td>\r\n              <td>500 </td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td>7 nap</td>\r\n              <td>1000 </td>\r\n            </tr>\r\n          </table>\r\n\r\n          <br />\r\n          <p>\r\n\r\n            * FIGYELEM: A hűségprogram csak a 2021.01.01- től igénybe vet\r\n            kölcsönzésekre vonatkozik, visszamenőlegesen nem.\r\n            <br />\r\n\r\n            * A hűségpontok csak akkor kerülnek jóváírásra fiókjában ha már átvette a járművet!\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"gift_shop_wrapper\">\r\n        <div className=\"gift_shop_banner\">\r\n          <h1>Ajándékbolt</h1>\r\n        </div>\r\n        <div className=\"points_banner\">\r\n         <p>Az Ön pontjai: <span className=\"highlighted_number\">{husegpontok}</span></p>\r\n    \r\n        </div>\r\n\r\n        <div className=\"giftshop_container\">\r\n\r\n                                {giftshop_data.map(data => (\r\n\r\n\r\n\r\n                          <GiftShopItem action={() => Redeem(data.id)} id={data.id} name={data.item_name} price={data.item_price} picture={data.item_picture} remaining={data.item_remaining}        />\r\n                        \r\n\r\n\r\n\r\n                      ))}\r\n\r\n\r\n\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <FooterLoggedIn />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(GiftShop)\r\n"]},"metadata":{},"sourceType":"module"}