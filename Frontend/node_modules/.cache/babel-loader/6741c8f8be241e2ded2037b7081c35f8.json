{"ast":null,"code":"import _defineProperty from\"C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Link}from'react-router-dom';import{useState}from'react';import axios from'axios';import Swal from'sweetalert2';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(props){var history=useHistory();var _useState=useState({email_phone:'',password:'',error_list:[]}),_useState2=_slicedToArray(_useState,2),loginInput=_useState2[0],setLogin=_useState2[1];var handleInput=function handleInput(e){e.persist();setLogin(_objectSpread(_objectSpread({},loginInput),{},_defineProperty({},e.target.name,e.target.value)));};var ReRoute=function ReRoute(){history.push('/kolcsonzes');window.location.reload(false);};var loginSubmit=function loginSubmit(e){e.preventDefault();var data={email_phone:loginInput.email_phone,password:loginInput.password};axios.get('/sanctum/csrf-cookie').then(function(response){axios.post(\"api/login\",data).then(function(res){if(res.data.status===200){localStorage.setItem('auth_token',res.data.token);localStorage.setItem('phone',res.data.phone);localStorage.setItem('user_id',res.data.user_id);localStorage.setItem('v_nev',res.data.v_nev);localStorage.setItem('k_nev',res.data.k_nev);localStorage.setItem('auth_name',res.data.username);Swal.fire({title:res.data.message,icon:'success',iconColor:'#23552f',showCancelButton:false,showConfirmButton:false});ReRoute();}else if(res.data.status===401){Swal.fire({text:res.data.message,icon:'warning',iconColor:'#972626',showCancelButton:false,showConfirmButton:true,confirmButtonColor:'#23552f'});}else{setLogin(_objectSpread(_objectSpread({},loginInput),{},{error_list:res.data.validation_errors}));}});});};return/*#__PURE__*/_jsx(\"div\",{className:\"login_form_container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginSubmit,className:\"login_form\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",className:\"form_text\",children:props.form_text}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email_phone\",onChange:handleInput,value:loginInput.email_phone,Placeholder:\"Email-c\\xEDm vagy mobilsz\\xE1m\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"error_message\",children:loginInput.error_list.email_phone}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleInput,value:loginInput.password,Placeholder:\"Jelsz\\xF3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"error_message\",children:loginInput.error_list.password}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"primary_button\",children:\"Bejelentkez\\xE9s\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\" vagy\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/regisztracio\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"secondary_button\",children:\"Regisztr\\xE1ci\\xF3\"})})]})});};export default LoginForm;","map":{"version":3,"sources":["C:/Users/SHOR/Desktop/Rental-1 CLONE/Rental1/Frontend/src/components/LoginForm.js"],"names":["React","Link","useState","axios","Swal","useHistory","LoginForm","props","history","email_phone","password","error_list","loginInput","setLogin","handleInput","e","persist","target","name","value","ReRoute","push","window","location","reload","loginSubmit","preventDefault","data","get","then","response","post","res","status","localStorage","setItem","token","phone","user_id","v_nev","k_nev","username","fire","title","message","icon","iconColor","showCancelButton","showConfirmButton","text","confirmButtonColor","validation_errors","form_text"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport {useState} from 'react'\r\nimport axios from 'axios'\r\nimport Swal from 'sweetalert2'\r\nimport {useHistory,} from 'react-router-dom'\r\n\r\n\r\n\r\n\r\n\r\nconst LoginForm = (props) => {\r\n\r\n  const history = useHistory();\r\n  const [loginInput, setLogin] = useState({\r\n\r\n  email_phone: '',\r\n  password: '',\r\n  error_list: [],\r\n\r\n  });\r\n\r\n\r\n    const handleInput = (e) => {\r\n\r\n      e.persist();\r\n      setLogin({...loginInput, [e.target.name]: e.target.value });\r\n    }\r\n\r\n\r\n\r\n    const ReRoute = () => {\r\n                    \r\n                    history.push('/kolcsonzes');\r\n                    window.location.reload(false);\r\n                \r\n\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const loginSubmit = (e) => {\r\n\r\n      e.preventDefault();\r\n      \r\n      const data = {\r\n\r\n          email_phone: loginInput.email_phone,\r\n          password: loginInput.password,\r\n\r\n      }\r\n\r\n       axios.get('/sanctum/csrf-cookie').then(response => {\r\n       axios.post(`api/login`, data).then(res => {\r\n\r\n\r\n         if(res.data.status === 200)\r\n         {\r\n                    localStorage.setItem('auth_token', res.data.token);\r\n                    localStorage.setItem('phone', res.data.phone);\r\n                    localStorage.setItem('user_id', res.data.user_id);\r\n                    localStorage.setItem('v_nev', res.data.v_nev);\r\n                    localStorage.setItem('k_nev', res.data.k_nev);\r\n                    localStorage.setItem('auth_name', res.data.username);\r\n\r\n                  Swal.fire({\r\n                      title: res.data.message,\r\n                      icon: 'success',\r\n                      iconColor: '#23552f',\r\n                      showCancelButton: false,\r\n                      showConfirmButton: false,\r\n                      })\r\n\r\n                    ReRoute();\r\n\r\n\r\n                        \r\n       \r\n                 \r\n                     \r\n\r\n         }\r\n\r\n         else if(res.data.status === 401)\r\n         {\r\n\r\n\r\n            Swal.fire({\r\n  \r\n                     \r\n                      text: res.data.message,\r\n                      icon: 'warning',\r\n                      iconColor: '#972626',\r\n                      showCancelButton: false,\r\n                      showConfirmButton: true,\r\n                      confirmButtonColor: '#23552f',\r\n\r\n              })\r\n\r\n         }\r\n\r\n         else \r\n         {\r\n\r\n           setLogin({...loginInput, error_list: res.data.validation_errors });\r\n\r\n         }\r\n         \r\n\r\n             \r\n       });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"login_form_container\">\r\n      <form onSubmit={loginSubmit} className=\"login_form\">\r\n        <br />\r\n        <label htmlFor=\"\" className=\"form_text\">\r\n          {props.form_text}\r\n        </label>\r\n        <br />\r\n        <input type=\"text\" name=\"email_phone\" onChange={handleInput} value={loginInput.email_phone} Placeholder=\"Email-cím vagy mobilszám\" />\r\n        <br />\r\n         <span className=\"error_message\">{loginInput.error_list.email_phone}</span>\r\n        <input type=\"password\" name=\"password\" onChange={handleInput} value={loginInput.password} Placeholder=\"Jelszó\" />\r\n          <span className=\"error_message\">{loginInput.error_list.password}</span>\r\n        <br />\r\n        <button type=\"submit\" className=\"primary_button\">Bejelentkezés</button>\r\n        <br />\r\n        <label htmlFor=\"\"> vagy</label>\r\n        <br />\r\n        <Link to=\"/regisztracio\">\r\n          <button type=\"submit\" className=\"secondary_button\">Regisztráció</button>\r\n        </Link>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginForm\r\n"]},"metadata":{},"sourceType":"module"}